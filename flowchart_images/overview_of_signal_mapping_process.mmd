flowchart LR
    subgraph Query["Query: Point-Based Data"]
        P1["Point 1<br/>(x₁, y₁, z₁, value₁)"]
        P2["Point 2<br/>(x₂, y₂, z₂, value₂)"]
        P3["Point N<br/>(xₙ, yₙ, zₙ, valueₙ)"]
    end

    subgraph Process["Signal Mapping Process"]
        Step1["1. Voxel Index<br/>Calculation<br/>idx = floor((coord - min) / res)"]
        Step2["2. Group Points<br/>by Voxel"]
        Step3["3. Interpolation<br/>& Aggregation<br/>Methods: Nearest/Linear/IDW/KDE<br/>Agg: mean/max/min/sum"]
        Step4["4. Signal Storage<br/>Store in voxel grid"]
    end

    subgraph Output["Voxel Grid Output"]
        V1["Voxel [i,j,k]<br/>Signal Value"]
        V2["Voxel [i+1,j,k]<br/>Signal Value"]
        V3["Voxel Grid<br/>Complete 3D Array"]
    end

    P1 --> Step1
    P2 --> Step1
    P3 --> Step1

    Step1 --> Step2
    Step2 --> Step3
    Step3 --> Step4

    Step4 --> V1
    Step4 --> V2
    Step4 --> V3

    classDef query fill:#e3f2fd,stroke:#1976d2
    classDef process fill:#fff3e0,stroke:#f57c00
    classDef output fill:#e8f5e9,stroke:#388e3c

    class P1,P2,P3 query
    class Step1,Step2,Step3,Step4 process
    class V1,V2,V3 output